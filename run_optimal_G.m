scPaths = {'AA_20120815.hdf5',...
'AR_20120813.hdf5',...
'CN_20120927.hdf5',...
'DA_20120813.hdf5',...
'DG_20120903.hdf5',...
'DH_20120806.hdf5',...
'ER_20120816.hdf5',...
'EU_20120803.hdf5',...
'FI_20120727.hdf5',...
'FJ_20120808.hdf5'};

scName = '/C'

fcPaths = {'AA_20120815.hdf5',...
'AR_20120813.hdf5',...
'CN_20120927.hdf5',...
'DA_20120813.hdf5',...
'DG_20120903.hdf5',...
'DH_20120806.hdf5',...
'ER_20120816.hdf5',...
'EU_20120803.hdf5',...
'FI_20120727.hdf5',...
'FJ_20120808.hdf5'};

startG = 0.025
endG = 1
incG = 0.025
fic = true
ffi = false
simTime = 8*60*1000
dt = 1
noiseAmp = 0.001
% saveFigPath = '../../results/68/optimalG_68_fic_sigma0.001_dt1_8mins_EI.jpeg'
saveMatPaths = {'optimalG_AA_20120815_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_AR_20120813_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_CN_20120927_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_DA_20120813_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_DG_20120903_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_DH_20120806_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_ER_20120816_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_EU_20120803_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_FI_20120727_fic_dt1_sigma0.001_8mins_EI.mat',...
'optimalG_FJ_20120808_fic_dt1_sigma0.001_8mins_EI.mat'};
% saveCorrsPath = '../../results/68/optimalG_68_fic_sigma0.001_dt1_20mins.hdf5';
p = parpool(2);
parfor i = 1:10
    compute_optimal_G(['../../data/connectivity_68/SC_FC_all/' scPaths{i}],scName,['../../data/connectivity_68/SC_FC_all/' fcPaths{i}],...
        startG,endG,incG,fic,ffi,simTime,dt,noiseAmp,['../../results/68/' saveMatPaths{i}]);
end
p.delete();
clear p;
% rmCmd = strcat(['rm ',saveCorrsPath]);
% if(~system(strcat(['test -e ',saveCorrsPath])))
%     system(rmCmd);
% end
% h5create(saveCorrsPath,'/FCCorrelations',length(startG:incG:endG));
% h5write(saveCorrsPath,'/FCCorrelations',fcCorrs);
